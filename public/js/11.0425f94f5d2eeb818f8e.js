(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{279:function(t,e,o){"use strict";o.r(e);var n,r=o(0),i=o(4),s=o(10),a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},c=function(t,e,o,n){return new(o||(o=Promise))((function(r,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function a(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},l=function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},d=Object(i.c)("questions"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.mounted=function(){var t=this;this.$nextTick((function(){t.getQuestions(parseInt(t.$route.params.survey_id))}))},Object.defineProperty(e.prototype,"actualUser",{get:function(){return this.$auth.user()},enumerable:!0,configurable:!0}),e.prototype.handleEditQuestion=function(t){t.required=Boolean(t.required),this.setForm(t),this.setModalAdd(!1),this.setModalVisible(!0)},e.prototype.toAnswersPage=function(t){this.$router.push({path:"/answers/question/"+t+"/survey/"+this.$route.params.survey_id})},e.prototype.deleteQuestionConfirm=function(t){return c(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,Object(s.a)("front.delete_question_confirmation",!0)];case 1:return e.sent()?(this.deleteQuestion(t),[2]):[2]}}))}))},e.prototype.getQuestions=function(t){return c(this,void 0,void 0,(function(){return l(this,(function(e){return this.loadQuestions({survey_id:t}),[2]}))}))},u([d.State],e.prototype,"fields",void 0),u([d.State],e.prototype,"questions",void 0),u([d.State],e.prototype,"isLoading",void 0),u([d.State],e.prototype,"isModalAdd",void 0),u([d.State],e.prototype,"form",void 0),u([d.Action],e.prototype,"deleteQuestion",void 0),u([d.Action],e.prototype,"loadQuestions",void 0),u([d.Action],e.prototype,"setModalVisible",void 0),u([d.Action],e.prototype,"setModalAdd",void 0),u([d.Action],e.prototype,"setForm",void 0),e=u([Object(r.a)({components:{}})],e)}(r.c),f=o(6),b=Object(f.a)(p,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-button",{staticClass:"btn table-btn mr-2",staticStyle:{"margin-bottom":"5px"},on:{click:function(e){t.getQuestions(parseInt(t.$route.params.survey_id))}}},[t._v(t._s(t.$t("strings.update_table")))]),o("b-table",{staticClass:"btable",staticStyle:{"max-height":"max-content"},attrs:{striped:"",hover:"",responsive:"","sticky-header":"","no-border-collapse":"",outlined:"","head-variant":"dark",busy:t.isLoading,items:t.questions,fields:t.fields},scopedSlots:t._u([{key:"table-busy",fn:function(){return[o("div",{staticClass:"text-center text-danger"},[o("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"head(src)",fn:function(e){return[o("span",[t._v(t._s(t.$t("questions.src")))])]}},{key:"head(order)",fn:function(e){return[o("span",[t._v(t._s(t.$t("questions.order")))])]}},{key:"head(input_type_text)",fn:function(e){return[o("span",[t._v(t._s(t.$t("questions.input_type_text")))])]}},{key:"head(required)",fn:function(e){return[o("span",[t._v(t._s(t.$t("questions.required")))])]}},{key:"head(answers)",fn:function(e){return[o("span",[t._v(t._s(t.$t("questions.answers")))])]}},{key:"head(title)",fn:function(e){return[o("span",[t._v(t._s(t.$t("questions.title")))])]}},{key:"head(actions)",fn:function(e){return[o("span",[t._v(t._s(t.$t("strings.actions")))])]}},{key:"head(created_at)",fn:function(e){return[o("div",{staticClass:"text-nowrap"},[t._v(t._s(t.$t("strings.created_at")))])]}},{key:"head(updated_at)",fn:function(e){return[o("div",{staticClass:"text-nowrap"},[t._v(t._s(t.$t("strings.updated_at")))])]}},{key:"cell(answers)",fn:function(e){return[o("b-button",{staticClass:"btn table-btn mr-2",staticStyle:{"margin-bottom":"5px"},on:{click:function(o){return t.toAnswersPage(e.item.id)}}},[t._v(t._s(t.$t("questions.view_answers")))])]}},{key:"cell(required)",fn:function(e){return[e.item.required?o("b-button",{attrs:{variant:"outline-success",disabled:""}},[t._v(t._s(t.$t("questions.required_true")))]):o("b-button",{attrs:{disabled:"",variant:"outline-secondary"}},[t._v(t._s(t.$t("questions.required_false")))])]}},{key:"cell(created_at)",fn:function(e){return[o("span",[t._v(t._s(t._f("moment")(e.item.created_at,"dddd D, MMMM YYYY")))])]}},{key:"cell(updated_at)",fn:function(e){return[o("span",[t._v(t._s(t._f("moment")(e.item.updated_at,"dddd D, MMMM YYYY")))])]}},{key:"cell(actions)",fn:function(e){return[o("b-button",{staticClass:"btn table-btn mb-2",staticStyle:{"margin-right":"5px"},attrs:{size:"sm",title:t.$t("strings.edit")},on:{click:function(o){return t.handleEditQuestion(e.item)}}},[o("b-icon",{staticStyle:{color:"#fff","margin-right":"5px"},attrs:{icon:"pencil"}}),t._v(t._s(t.$t("strings.edit")))],1),o("b-button",{staticClass:"btn-danger table-btn mb-2",attrs:{title:t.$t("strings.delete"),size:"sm"},on:{click:function(o){return t.deleteQuestionConfirm(e.item)}}},[o("b-icon",{staticStyle:{color:"#fff","margin-right":"5px"},attrs:{icon:"trash-fill"}}),t._v(t._s(t.$t("strings.delete")))],1)]}},{key:"cell(src)",fn:function(e){return[e.item.src?o("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:"/uploads/images/questions/"+e.item.src}}):t._e()]}},{key:"cell(index)",fn:function(e){return[o("span",[t._v(t._s(e.index+1))])]}}])})],1)}),[],!1,null,"5227dc71",null).exports,_=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),y=function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},m=Object(i.c)("questions"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.handleOk=function(){this.isAdd?this.addQuestion(this.form):this.editQuestion(this.form)},e.prototype.handleClose=function(){this.setModalVisible(!1)},y([Object(r.b)()],e.prototype,"form",void 0),y([Object(r.b)()],e.prototype,"isAdd",void 0),y([Object(r.b)()],e.prototype,"isVisible",void 0),y([m.Action],e.prototype,"addQuestion",void 0),y([m.Action],e.prototype,"editQuestion",void 0),y([m.Action],e.prototype,"setModalVisible",void 0),y([m.State],e.prototype,"isModalLoading",void 0),y([i.a],e.prototype,"setDialogMessage",void 0),e=y([Object(r.a)({components:{}})],e)}(r.c),v=Object(f.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-modal",{attrs:{"hide-header-close":"",visible:t.isVisible,"cancel-title":t.$t("buttons.cancel"),"ok-disabled":t.isModalLoading,"ok-title":t.isModalLoading?t.$t("buttons.sending"):t.isAdd?t.$t("buttons.add"):t.$t("buttons.update"),title:t.isAdd?t.$t("questions.add_question"):t.$t("questions.edit_question")},on:{hide:t.handleClose,ok:function(e){return e.preventDefault(),t.handleOk(e)}}},[o("b-form",[o("b-form-group",{attrs:{label:t.$t("questions.form_survey_id"),description:t.$t("questions.form_survey_id_description"),"label-for":"survey_id"}},[o("b-form-input",{attrs:{id:"survey_id",type:"text",required:"",readonly:""},model:{value:t.form.survey_id,callback:function(e){t.$set(t.form,"survey_id",e)},expression:"form.survey_id"}})],1),o("b-form-group",{attrs:{label:t.$t("questions.form_title"),description:t.$t("questions.form_title_description"),"label-for":"title"}},[o("b-form-input",{attrs:{id:"title",type:"text",maxlength:"140",required:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),o("b-form-group",{attrs:{label:t.$t("questions.form_input_type_id"),description:t.$t("questions.form_input_type_id_description"),"label-for":"input_type_id"}},[o("b-form-select",{attrs:{id:"input_type_id","select-size":4},model:{value:t.form.input_type_id,callback:function(e){t.$set(t.form,"input_type_id",e)},expression:"form.input_type_id"}},[o("b-form-select-option",{attrs:{value:1}},[t._v("De seleci√≥n")]),o("b-form-select-option",{attrs:{value:2}},[t._v("Abierta")])],1)],1),o("b-form-group",{attrs:{label:t.$t("questions.form_order"),description:t.$t("questions.form_order_description"),"label-for":"order"}},[o("b-form-input",{attrs:{id:"order",type:"number",min:"0"},model:{value:t.form.order,callback:function(e){t.$set(t.form,"order",e)},expression:"form.order"}})],1)],1),o("b-form-group",{attrs:{label:t.$t("questions.form_required"),description:t.$t("questions.form_required_description"),"label-for":"required"}},[o("b-form-checkbox",{attrs:{id:"required",name:"required",switch:""},model:{value:t.form.required,callback:function(e){t.$set(t.form,"required",e)},expression:"form.required"}})],1),o("hr"),o("b-form-group",{attrs:{label:t.$t("questions.form_image"),"label-for":"src",description:t.$t("questions.form_image_description")}},[o("b-form-file",{attrs:{id:"src",accept:"image/*","browse-text":t.$t("strings.browse"),state:Boolean(t.form.src),placeholder:t.$t("strings.choose_img"),"drop-placeholder":t.$t("strings.drop_img")},model:{value:t.form.src,callback:function(e){t.$set(t.form,"src",e)},expression:"form.src"}})],1)],1)}),[],!1,null,null,null).exports,g=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),q=function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},$=Object(i.c)("questions"),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.question={},e}return g(e,t),e.prototype.mounted=function(){this.question.survey_id=parseInt(this.$route.params.survey_id),this.setForm(this.question),this.setBackUrl("/surveys"),this.setMenu([{text:this.$t("questions.add_question"),key:1,handler:this.addQuestion}])},e.prototype.addQuestion=function(){this.question.input_type_id=1,this.question.required=!0,this.setForm(this.question),this.setModalAdd(!0),this.setModalVisible(!0)},q([i.a],e.prototype,"setBackUrl",void 0),q([i.a],e.prototype,"setMenu",void 0),q([$.Action],e.prototype,"setModalVisible",void 0),q([$.Action],e.prototype,"setForm",void 0),q([$.Action],e.prototype,"setModalAdd",void 0),q([$.State],e.prototype,"isModalVisible",void 0),q([$.State],e.prototype,"isModalAdd",void 0),q([$.State],e.prototype,"form",void 0),e=q([Object(r.a)({components:{QuestionList:b,QuestionModal:v}})],e)}(r.c),w=Object(f.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",[e("h2",[this._v(this._s(this.$t("questions.title")))]),e("QuestionList")],1)],1),e("question-modal",{ref:"question_modal",attrs:{survey_id:this.$route.params.survey_id,form:this.form,"is-add":this.isModalAdd,"is-visible":this.isModalVisible}})],1)}),[],!1,null,"3646f678",null);e.default=w.exports}}]);