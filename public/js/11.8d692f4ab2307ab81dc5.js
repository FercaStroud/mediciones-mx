(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{277:function(t,e,o){"use strict";o.r(e);var r,n=o(2),i=o(5),s=o(13),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,r){var n,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,o,s):n(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},u=function(t,e,o,r){return new(o||(o=Promise))((function(n,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},l=function(t,e){var o,r,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},d=Object(i.c)("surveys"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.mounted=function(){var t=this;this.$nextTick((function(){t.getSurveys(parseInt(t.actualUser.id))}))},Object.defineProperty(e.prototype,"actualUser",{get:function(){return this.$auth.user()},enumerable:!0,configurable:!0}),e.prototype.handleEditSurvey=function(t){this.setForm(t),this.setModalAdd(!1),this.setModalVisible(!0)},e.prototype.toQuestionsPage=function(t){this.$router.push({path:"/questions/survey/"+t})},e.prototype.deleteSurveyConfirm=function(t){return u(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,Object(s.a)("front.delete_survey_confirmation",!0)];case 1:return e.sent()?(this.deleteSurvey(t),[2]):[2]}}))}))},e.prototype.getSurveys=function(t){return u(this,void 0,void 0,(function(){return l(this,(function(e){return this.loadSurveys({user_id:t}),[2]}))}))},c([d.State],e.prototype,"fields",void 0),c([d.State],e.prototype,"surveys",void 0),c([d.State],e.prototype,"isLoading",void 0),c([d.State],e.prototype,"isModalAdd",void 0),c([d.State],e.prototype,"form",void 0),c([d.Action],e.prototype,"deleteSurvey",void 0),c([d.Action],e.prototype,"loadSurveys",void 0),c([d.Action],e.prototype,"setModalVisible",void 0),c([d.Action],e.prototype,"setModalAdd",void 0),c([d.Action],e.prototype,"setForm",void 0),e=c([Object(n.a)({components:{}})],e)}(n.c),p=o(6),y=Object(p.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-button",{staticClass:"btn table-btn mr-2",staticStyle:{"margin-bottom":"5px"},on:{click:function(e){t.getSurveys(parseInt(t.actualUser.id))}}},[t._v(t._s(t.$t("strings.update_table")))]),o("b-table",{staticClass:"btable",staticStyle:{"max-height":"max-content"},attrs:{striped:"",hover:"",responsive:"","sticky-header":"","no-border-collapse":"",outlined:"","head-variant":"dark",busy:t.isLoading,items:t.surveys,fields:t.fields},scopedSlots:t._u([{key:"table-busy",fn:function(){return[o("div",{staticClass:"text-center text-danger"},[o("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"head(name)",fn:function(e){return[o("span",[t._v(t._s(t.$t("surveys.title")))])]}},{key:"head(slug)",fn:function(e){return[o("span",[t._v(t._s(t.$t("surveys.slug")))])]}},{key:"head(description)",fn:function(e){return[o("span",[t._v(t._s(t.$t("surveys.description")))])]}},{key:"head(welcome_text)",fn:function(e){return[o("span",[t._v(t._s(t.$t("surveys.welcome_text")))])]}},{key:"head(end_text)",fn:function(e){return[o("span",[t._v(t._s(t.$t("surveys.end_text")))])]}},{key:"head(questions)",fn:function(e){return[o("span",[t._v(t._s(t.$t("surveys.questions")))])]}},{key:"head(active)",fn:function(e){return[o("span",[t._v(t._s(t.$t("surveys.active")))])]}},{key:"head(created_at)",fn:function(e){return[o("span",[t._v(t._s(t.$t("strings.created_at")))])]}},{key:"head(updated_at)",fn:function(e){return[o("span",[t._v(t._s(t.$t("strings.updated_at")))])]}},{key:"head(actions)",fn:function(e){return[o("span",[t._v(t._s(t.$t("strings.actions")))])]}},{key:"cell(active)",fn:function(e){return[1===e.item.active?o("b-button",{attrs:{variant:"outline-success",disabled:""}},[t._v(t._s(t.$t("surveys.active_true")))]):o("b-button",{attrs:{disabled:"",variant:"outline-secondary"}},[t._v(t._s(t.$t("surveys.active_false")))])]}},{key:"cell(questions)",fn:function(e){return[o("b-button",{staticClass:"btn table-btn mr-2",staticStyle:{"margin-bottom":"5px"},on:{click:function(o){return t.toQuestionsPage(e.item.id)}}},[t._v(t._s(t.$t("surveys.view_questions")))])]}},{key:"cell(created_at)",fn:function(e){return[o("span",[t._v(t._s(t._f("moment")(e.item.created_at,"dddd D, MMMM YYYY")))])]}},{key:"cell(updated_at)",fn:function(e){return[o("span",[t._v(t._s(t._f("moment")(e.item.updated_at,"dddd D, MMMM YYYY")))])]}},{key:"cell(actions)",fn:function(e){return[o("b-button",{staticClass:"btn table-btn mr-2",staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(t.$t("strings.show_details")))]),o("b-button",{staticClass:"btn table-btn mb-2",staticStyle:{"margin-right":"5px"},attrs:{size:"sm",title:t.$t("strings.edit")},on:{click:function(o){return t.handleEditSurvey(e.item)}}},[o("b-icon",{staticStyle:{color:"#fff"},attrs:{icon:"pencil"}})],1),o("b-button",{staticClass:"btn-danger table-btn mb-2",attrs:{title:t.$t("strings.delete"),size:"sm"},on:{click:function(o){return t.deleteSurveyConfirm(e.item)}}},[o("b-icon",{staticStyle:{color:"#fff"},attrs:{icon:"trash-fill"}})],1)]}},{key:"cell(index)",fn:function(e){return[o("span",[t._v(t._s(e.index+1))])]}}])})],1)}),[],!1,null,"142c96bf",null).exports,v=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),b=function(t,e,o,r){var n,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,o,s):n(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},_=Object(i.c)("surveys"),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.handleOk=function(){this.isAdd?this.addSurvey(this.form):this.editSurvey(this.form)},e.prototype.handleClose=function(){this.setModalVisible(!1)},b([Object(n.b)()],e.prototype,"form",void 0),b([Object(n.b)()],e.prototype,"isAdd",void 0),b([Object(n.b)()],e.prototype,"surveys",void 0),b([Object(n.b)()],e.prototype,"isVisible",void 0),b([_.Action],e.prototype,"addSurvey",void 0),b([_.Action],e.prototype,"editSurvey",void 0),b([_.Action],e.prototype,"setModalVisible",void 0),b([_.State],e.prototype,"isModalLoading",void 0),b([i.a],e.prototype,"setDialogMessage",void 0),e=b([n.a],e)}(n.c),h=Object(p.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-modal",{attrs:{"hide-header-close":"",visible:t.isVisible,"cancel-title":t.$t("buttons.cancel"),"ok-disabled":t.isModalLoading,"ok-title":t.isModalLoading?t.$t("buttons.sending"):t.isAdd?t.$t("buttons.add"):t.$t("buttons.update"),title:(t.isAdd,t.$t("surveys.add_survey"))},on:{hide:t.handleClose,ok:function(e){return e.preventDefault(),t.handleOk(e)}}},[o("b-form",[o("b-form-group",{attrs:{label:t.$t("surveys.form_title"),description:t.$t("surveys.form_title_description"),"label-for":"title"}},[o("b-form-input",{attrs:{id:"title",type:"text",maxlength:"50",required:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),o("b-form-group",{attrs:{label:t.$t("surveys.form_slug"),description:t.$t("surveys.form_slug_description"),"label-for":"slug"}},[o("b-form-input",{attrs:{id:"slug",type:"text",maxlength:"50"},model:{value:t.form.slug,callback:function(e){t.$set(t.form,"slug",e)},expression:"form.slug"}})],1),o("b-form-group",{attrs:{label:t.$t("surveys.form_description"),description:t.$t("surveys.form_description_description"),"label-for":"slug"}},[o("b-form-textarea",{attrs:{id:"description",type:"text"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),o("b-form-group",{attrs:{label:t.$t("surveys.form_welcome_text"),description:t.$t("surveys.form_welcome_text_description"),"label-for":"welcome_text"}},[o("b-form-textarea",{attrs:{id:"welcome_text",type:"text"},model:{value:t.form.welcome_text,callback:function(e){t.$set(t.form,"welcome_text",e)},expression:"form.welcome_text"}})],1),o("b-form-group",{attrs:{label:t.$t("surveys.form_end_text"),description:t.$t("surveys.form_end_text_description"),"label-for":"end_text"}},[o("b-form-textarea",{attrs:{id:"end_text",type:"text"},model:{value:t.form.end_text,callback:function(e){t.$set(t.form,"end_text",e)},expression:"form.end_text"}})],1),o("b-form-group",{attrs:{label:t.$t("surveys.active"),description:t.$t("surveys.active_description"),"label-for":"active"}},[o("b-form-checkbox",{attrs:{id:"active",name:"active",switch:""},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}})],1)],1)],1)}),[],!1,null,null,null).exports,g=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),x=function(t,e,o,r){var n,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,o,s):n(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},$=Object(i.c)("surveys"),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.survey={},e}return g(e,t),e.prototype.mounted=function(){this.setBackUrl("/dashboard"),this.setMenu([{text:"surveys.add_survey",key:1,handler:this.addSurvey}])},e.prototype.addSurvey=function(){this.setForm(this.survey),this.setModalAdd(!0),this.setModalVisible(!0)},x([i.a],e.prototype,"setBackUrl",void 0),x([i.a],e.prototype,"setMenu",void 0),x([$.Action],e.prototype,"setModalVisible",void 0),x([$.Action],e.prototype,"setForm",void 0),x([$.Action],e.prototype,"setModalAdd",void 0),x([$.State],e.prototype,"isModalVisible",void 0),x([$.State],e.prototype,"isModalAdd",void 0),x([$.State],e.prototype,"form",void 0),e=x([Object(n.a)({components:{surveyModal:h,SurveyList:y}})],e)}(n.c),w=Object(p.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",[e("h2",[this._v(this._s(this.$t("surveys.title")))]),e("SurveyList")],1)],1),e("survey-modal",{ref:"survey_modal",attrs:{form:this.form,"is-add":this.isModalAdd,"is-visible":this.isModalVisible}})],1)}),[],!1,null,"23896a5c",null);e.default=w.exports}}]);